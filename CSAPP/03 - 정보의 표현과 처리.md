# 컴퓨터의 주소 지정, 빅 엔디언과 리틀 엔디언

메모리에 접근하기 위해 보통 컴퓨터는 메모리에서 주소지정이 가능한 최소 단위인 8비트 단위의 블록인 **바이트**를 사용한다. 프로그램은 메모리를 **가상 메모리**라고 하는 거대한 바이트의 배열로 취급한다. 메모리의 각 바이트는 **주소**라고 하는 고유한 숫자로 식별할 수 있으며, 모든 가능한 주소들의 집합을 **가상 주소공간**이라 부른다.

## 워드 크기

> **워드**(word)는 하나의 기계어 명령어나 연산을 통해 저장된 장치로부터 레지스터에 옮겨 놓을 수 있는 데이터 단위이다. 메모리에서 레지스터로 데이터를 옮기거나, ALU을 통해 데이터를 조작하거나 할 때, 하나의 명령어로 실행될 수 있는 데이터 처리 단위이다. 흔히 사용하는 32비트 CPU(ARM 등)라면 워드는 32비트가 된다. -위키백과-

모든 컴퓨터는 **워드 크기(word size)**를 가지는데, 이것은 포인터의 정규 크기다. 하나의 가상 주소가 한 개의 워드로 인코딩되기 때문에 이 워드 크기가 가상 주소공간의 최대 크기다. 가상 주소는 0에서 2^w -1 범위를 가지며 프로그램은 최대 2^w 바이트에 접근할 수 있게 된다.

최신 컴퓨터는 64비트 워드 크기를 가진다. 64비트 워드 크기로 확장되면서 가상 주소공간 범위가 16엑사바이트로 확장되었다. 대부분 64비트 컴퓨터들은 역방향 호환성을 가지고 있어 32비트 머신들을 위해 컴파일된 프로그램도 실행할 수 있다.

## 주소지정과 바이트 순서: 엔디언

여러 바이트에 걸쳐 있는 객체를 멀티 바이트 객체라고 한다. 컴퓨터에서 멀티 바이트 객체는 연속된 바이트에 저장되며, 객체의 주소는 사용된 바이트의 최소 주소로 정한다. 예를 들어, `int` 타입의 변수가 *x*가 주소 `0x100`을 가진다고 가정하자. 그러면 자료형 `int`는 4바이트이므로 변수 *x*는 메모리 주소 `0x100`, `0x101`, `0x102`, `0x103`의 위치에 저장될 것이다.

> **엔디언**(Endianness)은 컴퓨터의 메모리와 같은 1차원의 공간에 여러 개의 연속된 대상을 배열하는 방법을 뜻하며, 바이트를 배열하는 방법을 특히 **바이트 순서**(Byte order)라 한다.
>
> 엔디언은 보통 큰 단위가 앞에 나오는 **빅 엔디언**(Big-endian)과 작은 단위가 앞에 나오는 **리틀 엔디언**(Little-endian)으로 나눌 수 있으며, 두 경우에 속하지 않거나 둘을 모두 지원하는 것을 **미들 엔디언**(Middle-endian)이라 부르기도 한다.

**최상위 비트(MSB)**는 2진수의 여러 비트들 중 가장 큰 값에 해당하는 비트를 말한다. 즉 가장 왼쪽 비트다. 반대로 **최하위 비트(LSB)**는 가장 작은 값이자 가장 오른쪽 비트를 말한다.

위에서 `int` 자료형 변수 *x*가 16진수 값 0x01234567을 가진다고 가정해보자. 

- 비트로 표현(2진수): [0000, 0001, 0010, 0011, 0100, 0101, 0110, 0111]

  - 최상위 비트(MSB): 0000

  - 최하위비트(LSB): 0111

여기서 비트를 바이트로 나눌 수 있으며, 16진수로 표현할 수 있다.

- 바이트로 표현(16진수): [0x01, 0x23, 0x45, 0x67]

  - 가장 중요한 바이트: 0x01

  - 가장 덜 중요한 바이트: 0x67:

어떤 객체를 나타내는 바이트들을 정렬하는 데는 두 가지 일반적인 관습이 존재한다. 가장 중요한 바이트부터 저장하는 방식을 **빅 엔디언**이라 하고 가장 덜 중요한 바이트부터 저장하는 방식을 **리틀 엔디언**이라고 한다.

![03_endian](./03/03_endian.png)

바이트의 순서는 컴퓨터의 타입에 따라 다르다. 그래서 때때로 바이트 순서가 이슈가 되기도 한다.

##### ex) 바이너리 데이터가 네트워크를 통해 다른 컴퓨터로 전송될 때:

리틀 엔디언 컴퓨터에서 빅 엔디언 컴퓨터에 바이너리 데이터를 보낼 때 수신 측 프로그램에서는 워드들 내 바이트의 순서가 뒤바뀔 수 있다. 이를 방지하기 위해 송수신 측 컴퓨터들은 자신의 엔디언과 네트워크 표준간에 변환/역변환하는 방법을 사용해야 한다.

---